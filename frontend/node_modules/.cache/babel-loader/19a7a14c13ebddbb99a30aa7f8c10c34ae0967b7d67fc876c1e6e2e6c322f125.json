{"ast":null,"code":"import _objectSpread from\"C:/Users/aasth/OneDrive/Documents/GitHub/Real-Time-Collaborative-Logic-Puzzle-Platform/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{applyOptimisticMove,rollbackMove}from'../store/puzzleSlice';import{useWebSocket}from'../hooks/useWebSocket';import'./PuzzleGrid.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PuzzleGrid=_ref=>{let{puzzleId}=_ref;const dispatch=useDispatch();const{currentPuzzle,optimisticMoves}=useSelector(state=>state.puzzle);const{sendMove,connected}=useWebSocket(puzzleId);const[pendingMoves,setPendingMoves]=useState({});const[totalRewards,setTotalRewards]=useState(0);const getCellValue=(row,col)=>{for(const move of Object.values(optimisticMoves)){if(move.row===row&&move.col===col){return move.value;}}if(currentPuzzle!==null&&currentPuzzle!==void 0&&currentPuzzle.grid){return currentPuzzle.grid[row*4+col];}return'0';};const handleCellClick=(row,col)=>{if(!connected||currentPuzzle!==null&&currentPuzzle!==void 0&&currentPuzzle.solved)return;const moveId=\"move_\".concat(row,\"_\").concat(col,\"_\").concat(Date.now());const currentValue=getCellValue(row,col);const newValue=currentValue==='0'?'1':'0';dispatch(applyOptimisticMove({row,col,value:newValue,moveId}));setPendingMoves(prev=>_objectSpread(_objectSpread({},prev),{},{[moveId]:true}));const moveData={puzzleId,row,col,value:newValue};sendMove(moveData);setTimeout(()=>{setPendingMoves(prev=>{if(prev[moveId]){dispatch(rollbackMove({moveId}));const updated=_objectSpread({},prev);delete updated[moveId];return updated;}return prev;});},4000);};useEffect(()=>{if(currentPuzzle!==null&&currentPuzzle!==void 0&&currentPuzzle.solved&&totalRewards===0){setTotalRewards(150);}},[currentPuzzle===null||currentPuzzle===void 0?void 0:currentPuzzle.solved,totalRewards]);useEffect(()=>{const confirmedMoves=Object.keys(optimisticMoves).filter(moveId=>!pendingMoves[moveId]);if(confirmedMoves.length>0){setPendingMoves(prev=>{const updated=_objectSpread({},prev);confirmedMoves.forEach(moveId=>delete updated[moveId]);return updated;});}},[optimisticMoves,pendingMoves]);if(!currentPuzzle){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading puzzle...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"puzzle-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"puzzle-title\",children:currentPuzzle.name}),/*#__PURE__*/_jsx(\"div\",{className:\"connection-indicator \".concat(connected?'online':'offline'),children:connected?'ðŸŸ¢ Connected':'ðŸ”´ Disconnected'}),currentPuzzle.solved?/*#__PURE__*/_jsxs(\"div\",{className:\"puzzle-solved-state\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"completion-celebration\",children:[\"\\uD83C\\uDF89 Puzzle Completed! \\uD83C\\uDF89\",/*#__PURE__*/_jsxs(\"div\",{className:\"reward-points\",children:[\"You earned \",totalRewards,\" points!\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"solved-grid\",children:[0,1,2,3].map(row=>[0,1,2,3].map(col=>{const cellValue=getCellValue(row,col);return/*#__PURE__*/_jsx(\"div\",{className:\"game-cell solved \".concat(cellValue==='1'?'filled':'empty'),children:cellValue},\"cell-\".concat(row,\"-\").concat(col));}))})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"puzzle-active-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"game-status\",children:\"\\uD83C\\uDFAF Solve the puzzle by clicking cells to match the target pattern!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"game-board\",children:[0,1,2,3].map(row=>[0,1,2,3].map(col=>{const cellValue=getCellValue(row,col);return/*#__PURE__*/_jsx(\"div\",{className:\"game-cell \".concat(cellValue==='1'?'filled':'empty'),onClick:()=>handleCellClick(row,col),children:cellValue},\"cell-\".concat(row,\"-\").concat(col));}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-instructions\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Rules:\"}),/*#__PURE__*/_jsx(\"p\",{children:currentPuzzle.rules})]})]});};export default PuzzleGrid;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","applyOptimisticMove","rollbackMove","useWebSocket","jsx","_jsx","jsxs","_jsxs","PuzzleGrid","_ref","puzzleId","dispatch","currentPuzzle","optimisticMoves","state","puzzle","sendMove","connected","pendingMoves","setPendingMoves","totalRewards","setTotalRewards","getCellValue","row","col","move","Object","values","value","grid","handleCellClick","solved","moveId","concat","Date","now","currentValue","newValue","prev","_objectSpread","moveData","setTimeout","updated","confirmedMoves","keys","filter","length","forEach","className","children","name","map","cellValue","onClick","rules"],"sources":["C:/Users/aasth/OneDrive/Documents/GitHub/Real-Time-Collaborative-Logic-Puzzle-Platform/frontend/src/components/PuzzleGrid.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { applyOptimisticMove, rollbackMove } from '../store/puzzleSlice';\nimport { useWebSocket } from '../hooks/useWebSocket';\nimport './PuzzleGrid.css';\n\nconst PuzzleGrid = ({ puzzleId }) => {\n  const dispatch = useDispatch();\n  const { currentPuzzle, optimisticMoves } = useSelector(state => state.puzzle);\n  const { sendMove, connected } = useWebSocket(puzzleId);\n  const [pendingMoves, setPendingMoves] = useState({});\n  const [totalRewards, setTotalRewards] = useState(0);\n\n  const getCellValue = (row, col) => {\n    for (const move of Object.values(optimisticMoves)) {\n      if (move.row === row && move.col === col) {\n        return move.value;\n      }\n    }\n    \n    if (currentPuzzle?.grid) {\n      return currentPuzzle.grid[row * 4 + col];\n    }\n    return '0';\n  };\n\n  const handleCellClick = (row, col) => {\n    if (!connected || currentPuzzle?.solved) return;\n    \n    const moveId = `move_${row}_${col}_${Date.now()}`;\n    const currentValue = getCellValue(row, col);\n    const newValue = currentValue === '0' ? '1' : '0';\n    \n    dispatch(applyOptimisticMove({ row, col, value: newValue, moveId }));\n    setPendingMoves(prev => ({ ...prev, [moveId]: true }));\n    \n    const moveData = { puzzleId, row, col, value: newValue };\n    sendMove(moveData);\n    \n    setTimeout(() => {\n      setPendingMoves(prev => {\n        if (prev[moveId]) {\n          dispatch(rollbackMove({ moveId }));\n          const updated = { ...prev };\n          delete updated[moveId];\n          return updated;\n        }\n        return prev;\n      });\n    }, 4000);\n  };\n\n  useEffect(() => {\n    if (currentPuzzle?.solved && totalRewards === 0) {\n      setTotalRewards(150);\n    }\n  }, [currentPuzzle?.solved, totalRewards]);\n\n  useEffect(() => {\n    const confirmedMoves = Object.keys(optimisticMoves).filter(\n      moveId => !pendingMoves[moveId]\n    );\n    \n    if (confirmedMoves.length > 0) {\n      setPendingMoves(prev => {\n        const updated = { ...prev };\n        confirmedMoves.forEach(moveId => delete updated[moveId]);\n        return updated;\n      });\n    }\n  }, [optimisticMoves, pendingMoves]);\n\n  if (!currentPuzzle) {\n    return <div className=\"loading\">Loading puzzle...</div>;\n  }\n\n  return (\n    <div className=\"puzzle-container\">\n      <h2 className=\"puzzle-title\">{currentPuzzle.name}</h2>\n      \n      <div className={`connection-indicator ${connected ? 'online' : 'offline'}`}>\n        {connected ? 'ðŸŸ¢ Connected' : 'ðŸ”´ Disconnected'}\n      </div>\n\n      {currentPuzzle.solved ? (\n        <div className=\"puzzle-solved-state\">\n          <div className=\"completion-celebration\">\n            ðŸŽ‰ Puzzle Completed! ðŸŽ‰\n            <div className=\"reward-points\">\n              You earned {totalRewards} points!\n            </div>\n          </div>\n          <div className=\"solved-grid\">\n            {[0, 1, 2, 3].map(row =>\n              [0, 1, 2, 3].map(col => {\n                const cellValue = getCellValue(row, col);\n                return (\n                  <div\n                    key={`cell-${row}-${col}`}\n                    className={`game-cell solved ${cellValue === '1' ? 'filled' : 'empty'}`}\n                  >\n                    {cellValue}\n                  </div>\n                );\n              })\n            )}\n          </div>\n        </div>\n      ) : (\n        <div className=\"puzzle-active-state\">\n          <div className=\"game-status\">\n            ðŸŽ¯ Solve the puzzle by clicking cells to match the target pattern!\n          </div>\n          <div className=\"game-board\">\n            {[0, 1, 2, 3].map(row =>\n              [0, 1, 2, 3].map(col => {\n                const cellValue = getCellValue(row, col);\n                return (\n                  <div\n                    key={`cell-${row}-${col}`}\n                    className={`game-cell ${cellValue === '1' ? 'filled' : 'empty'}`}\n                    onClick={() => handleCellClick(row, col)}\n                  >\n                    {cellValue}\n                  </div>\n                );\n              })\n            )}\n          </div>\n        </div>\n      )}\n      \n      <div className=\"game-instructions\">\n        <h3>Rules:</h3>\n        <p>{currentPuzzle.rules}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default PuzzleGrid;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}